<h1>Links</h1>

<p><%= link_to 'New Link', new_link_path, class: 'btn' %></p>

<table class="striped centered">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Public</th>
      <th>User</th>
      <th>Tags</th>
      <th colspan="3">Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @links.each do |link| %>
      <tr>
        <td><%= link_to truncate(link.title), link.url, target: '_blank', class: :tooltipped, data: { tooltip: "##{link.id} #{link.title}" } %></td>
        <td class='tooltipped' data-tooltip='<%= "#{link.description}" %>'><%= truncate(link.description, length: 50) %></td>
        <td><%= link.public %></td>
        <td><%= link.user.email if current_user_is_admin? %></td>
        <td>
          <% link.tag_list.each do |tag_name| %>
            <%= link_to tag.span(tag_name, class: 'badge white-text light-blue'), tag_path(tag_name) %>
          <% end %>
        </td>
        <td><%= link_to '<i class="material-icons">info_outline</i>'.html_safe, link %></td>
        <td><%= link_to '<i class="material-icons">edit</i>'.html_safe, edit_link_path(link), class: :tooltipped, data: { tooltip: 'Editar' }%></td>
        <td><%= link_to '<i class="material-icons">delete</i>'.html_safe, link, class: 'tooltipped', method: :delete, data: { tooltip: 'Eliminar', confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>